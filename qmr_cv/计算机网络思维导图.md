# 计算机网络网络

## 第一章 网络体系结构

### 计算机网络的概念

#### 计算机网络是一些互联的、自治的计算机系统的集合

### 计算机网络的组成

#### 由硬件、软件和协议三大部分组成

#### 边缘部分由所有连接到因特网上供用户使用的主机组成，用来进行通信核心部分由大量的网络和连接这些网络的路由器组成。

#### 通信子网由各种传输介质、通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力，实现计算机之间的数据通信资源子网是实现资源共享功能的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务

### 计算机网络的功能

#### 数据通信

#### 资源共享

#### 分布式处理

#### 提高可靠性

#### 负载均衡

#### 其它

### 计算机网络的分类

#### 广域网（WAN）城域网（MAN）局域网（LAN）个人区域网（PAN）

#### 广播式网络、点对点网络

#### 网络拓扑结构：总线形、星形、环形、网状形

#### 电路交换网络、报文交换网络（存储-转发网络）、分组交换网络（包交换网络）

#### 传输介质：有线双绞线网络、同轴电缆网络等、无线蓝牙、微波、无线电等类型

### 计算机网络的性能指标

#### 速率

#### 带宽

#### 吞吐量

#### 时延

##### 指数据（一个报文或分组）从网络一端传送到另一端所需要的总时间，它由4部分构成`发送时延、传播时延、处理时延、排队时延`。

##### `总时延=发送时延+传播时延+处理时延+排队时延`

##### 发送时延

###### 结点将分组的所有比特推向（传输）链路所需要的时间，也称传输时延。

###### 发 送 时 延 = 分 组 长 度 ( 数 据 长 度 ) 信 道 宽 度 ( 发 送 速 率 ) 发送时延=\frac{分组长度(数据长度)}{信道宽度(发送速率)}

##### 传播时延

###### 电磁波在信道中传播一定的距离需要花费的时间，即一个比特从链路的一端传播到另一端所需要的时间

##### 排队时延

###### 分组在进入路由器后要先在输入队列中排队等待处理产生的排队时延。

##### 处理时延

###### 数据在交换结点为存储转发而进行的一些必要的处理所花费的时间。

##### ​时延带宽积

###### 指发送端发送的第一个比特即将到达终点时，发送端已经发出多少个比特。

###### `时延带宽积 = 传播时延×信道带宽`

#### 往返时延（RTT）

#### 信道利用率

##### 指出某一信道有百分之多少的时间是有数据通过的。

### OSI七层结构概述

#### 应用层

##### 应用层是OSI模型的最高层，是用户与网络的界面，典型的协议有：文件传输协议FTP、电子邮件协议SMTP、万维网HTTP等

#### 表示层

##### 处理两个通信系统中交换信息的表示方式，不同机器采用的编码和表示方法不同，使用的数据结构不同为了使不同的数据和信息之间能够互相交换，表示层采用抽象的标准方法定义数据结构

#### 会话层

##### 会话层允许不同主机上的各个进程进行会话，利用传输层提供的端到端的服务，向表示层提供它的增值服务

#### 传输层

##### 端到端的通信，传输单位是报文段或用户数据报，提供可靠的传输服务，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务

#### 网络层

##### 因为因特网的主要网络层协议是`无连接`的网际协议（Internet Protocol，IP）和许多`路由`选择协议，因此因特网的网络层也称`网际层或IP层`

#### 数据链路层

##### 点到点通信，可理解为主机到主机之间的通信，一个点指硬件地址或IP地址，网络中参与通信的主机通过硬件地址或IP地址标识的

#### 物理层

### TCP/PI参考模型

#### 应用层

##### HTTP, FTP, DNS

#### 传输层

##### TCP, UDP

#### 网络层

##### IP

#### 网络接口层

##### Ethernet, ATM, Frame Relay

### 5层教学参考模型

#### 应用层

##### 支持各种网络应用: FTP, SMTP, HTTP

#### 传输层

##### 进程到进程的数据传输: TCP, UDP

#### 网络层

##### 源主机到目的主机的的数据分组路由与转发: IP, ICMP, OSPF

#### 数据链路层

##### 网络层传下来的数据报组装成帧: Ethernet, PPP

#### 物理层

##### 比特传输

## 第二章 数据链路层

### 概述

#### 结构

##### 结点

###### 主机、路由器

##### 链路

###### 两个节点之间的物理通道、传输介质有双绞线和光纤等

##### 帧

###### 链路层的协议数据单元，封装网络层数据报

#### 功能

##### 数据链路层负责通过一个链路从一个节点向另一个物理链路直接相连的相邻节点传送数据报

##### 为网络层提供：无确认无连接服务、有确认无连接服务和有确认面向连接服务。

##### 链路管理（连接的建立、维持和释放）

##### 组装成帧

##### 流量控制、差错控制

### 组帧

#### 字符填充的帧定界方法

##### 在SOH, EOT, ESC前面填充ESC转义字符区分首部开始SOH，结尾EOT约定由双方之间的协议完成

#### 字符计数法

#### 零比特填充的收尾标志法

#### 违规编码法

### 差错控制

#### 检错编码

##### 奇偶校验码， CRC循环校验码

#### 纠错编码

##### 海明码

### 流量控制

#### 停等协议

##### 发送窗口和接收窗口的大小固定为1

##### 发送方每发送一帧后停下来等待接收方ACK, ACK确认后才能继续发送下一帧

##### 接收方需要判断接收到的帧是新发的帧还是重新发送的帧,发送方为此给每一个帧加一个序号,由于停等协议规定只有一帧完全发送成功后才能发送新的帧，因而只用一比特来编号

#### GBN协议

##### 基本逻辑

###### 后退n协议中，发送方在发完一个数据帧后，不停下来等待应答帧，而是连续发送若干个数据帧，即使在连续发送过程中收到了接收方发来的应答帧，也可以继续发送。且发送方在每发送完一个数据帧时都要设置超时定时器。只要在所设置的超时时间内仍未收到确认帧，就要重发相应的数据帧。

##### 上层调用

###### 上层要发送数据时，发送方先检查发送窗口是否已满，如果未满，则产生一个帧并将其发送。如果窗口己满，发送方只需将数据返回给上层，暗示上层窗口已满。上层等一会再发送。 ( 实际实现中，发送方可以缓存这些数据，窗口不满时再发送帧)

##### ACK逻辑

###### GBN协议中，对n号帧的确认采用`累积确认`的方式，标明接收方已经收到n号帧和它之前的全部帧

##### 超时事件

###### 协议的名字为后退N帧/回退N帧，来源于出现丢失和时延过长帧时发送方的行为。
###### 就像在停等协议中一样，定时器将再次用于恢复数据帧或确认帧的丢失。
###### 如果出现超时，发送方重传所有已发送但未被确认的帧。

#### SR协议

##### 基本逻辑

###### 发送发如果收到ACK，加入该帧序号在窗口内，则SR发送方将那个被确认的帧标记为已接收。如果该帧序号是窗口的下界，则窗口向前移动到具有最小序号的未确认帧处。如果窗口移动了并且有序号在窗口内的未发送帧，则发送这些帧。SR接收方将确认一个正确接收的帧而不管其是否按序。失序的帧将被缓存，并返回给发送方一个该帧的确认帧，直到所有帧皆被收到为止，这时才可以将一-批帧按序交付给 上层，然后向前移动滑动窗口。

##### 上层调用

###### 发送发从上层收到数据后，SR发送方检查下一个可用于该帧的序号，如果序号位于发送窗口内，则发送数据帧;否则就像GBN一样，要么将数据缓存，要么返回给上层之后再传输。

##### 超时事件

###### 每个帧都有自己的定时器，一个超时事件发生后只重传一个帧。

### 可靠传输

#### 可靠传输机制是为了使数据可以正确稳定的传输和接收而制定的规则，数据链路层的可靠传输通常使用`确认`和`超时重传`两种机制来完成

#### `确认`是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为`捎带确认`

#### `超时重传`是指发送方在发送某一个数据帧以后就开始一个计时器，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。

### 介质访问控制（MAC Multiple Access Control）协议

#### 静态信道划分

##### 频分多路复用FDM

##### 时分多用复用TDM

##### 统计时分复用STDM

##### 波分多路复用WDM

##### 码分多路复用CDM

#### 动态信道划分

##### 协议产生的原因

###### 在随机访问协议中，不采用集中控制方式解决发送信息的次序问题，`所有用户能根据自己的意愿随机地发送信息，占用信道全部速率`，为了解决随机接入发生的碰撞，每个用户需要按照一定的规则反复地重传它的帧，直到该帧无碰撞地通过。这些规则就是随机访问介质访问控制协议

##### ALOHA

###### `纯ALOHA协议和分段ALOHA协议（时隙ALOHA协议）'

###### 纯ALOHA协议思想：不监听信道，不按时间槽发送，随机重发，想发就发

###### 时隙ALOHA协议思想：时间分成片，仅有在时间片段开始才能发送，其他和纯ALOHA一样

##### 载波监听多路访问协议CSMA

###### 允许多个设备在同一信道发送信号的协议，其中的设备监听其它设备是否忙碌，只有在线路空闲时才发送

###### 1-坚持 CSMA: 如果一个主机需要发送消息，那么它先监听信道，空闲则直接传输，不必等待。如果忙则一直监听，直到空闲马上传输

###### 非坚持 CSMA: 如果一个主机需要发送消息，那么它先监听信道，空闲则直接传输，不必等待。如果忙则等待一个随机的时间之后再进行监听

###### p-坚持 CSMA: 如果一个主机需要发送消息，那么它先监听信道，空闲则以概率P直接传输，不必等待；概率1-P等待到下一个时间槽在传输。如果忙则等待一个随机的时间之后再进行监听

##### 载波监听多点接入/碰撞检测 CSMA/CD



##### CDMA/CA




### 局域网 LAN

#### IEEE802.3

#### IEEE802.11

### 广域网 WAN

#### PPP协议

#### HDLC协议

## 第三章 网络层

### 概述

#### 结构

#### 功能

##### 路由选择和分组转发

##### 异构网络互联

##### 拥塞控制

### IPv4

#### 分组格式

#### 地址

#### NAT

#### 子网划分与子网掩码

#### CIDR

#### ARP协议

#### DHCP协议

#### ICMP协议

### IPv6

#### 诞生

#### 分组格式

#### 地址

#### IPv4和IPv6过渡策略

### 路由选择算法

#### AS

#### RIP算法

#### OSPF算法

#### BGP算法

### IP组播

## 第四章 传输层

### 概述

#### 功能

### UDP协议

### TCP协议

#### 三次握手、四次挥手

#### 可靠传输

#### 流量控制

#### 拥塞控制

## 第五章 应用层

### 概述

#### 结构

#### 功能

### 网络应用模型

#### C/S

#### P2P

### DNS域名解析系统

### 域名

### 域名服务器

### 域名解析

### FTP协议

### 电子邮件（SMTP, POP3, IMAP, MIME.....）

### HTTP协议与万维网
